<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css" />
    <title>Register</title>
  </head>
  <body>
    <section id="steps">
      <div id="register" class="modal">
        <div class="frame-container">
          <i class="fas fa-times-circle close-icon"></i>
          <iframe
            id="google-form"
            src="https://docs.google.com/forms/d/e/1FAIpQLScKIvCTPBdoWgG5DZpYs56gUhMi2Kq9t8ambWmHR2xm11dwyA/viewform?usp=sf_link"
            frameborder="0"
          ></iframe>
        </div>
      </div>
      <div class="step-container">
        <h1>Steps to register</h1>
        <ul>
          <li class="step">
            <h1>Registeration</h1>
            <p>
              Register to the event in the Developer Student Clubs web site.
              This is needed for us to keep track of the number of participants
            </p>
            <a
              target="_blank"
              href="https://dsc.community.dev/e/m5hfm4"
              class="btn"
              >REGISTER</a
            >
          </li>
          <li class="step">
            <h1>Submission of idea</h1>
            <p>Submit your ideas by entering relevant details of the same.</p>
            <a href="#register" class="btn">SUBMIT</a>
            <p class="error invisible">
              Please register to the event at the Community page by pressing the
              <strong>register</strong> link first
            </p>
          </li>
          <li class="step">
            <h1>Fingers crossed</h1>
            <p>
              That's it! Wait for the results of the event which will be updated
              after 15th of this month.
            </p>
          </li>
        </ul>
      </div>
    </section>
    <script
      src="https://kit.fontawesome.com/4eec0e39bb.js"
      crossorigin="anonymous"
    ></script>
    <script>
      window.FontAwesomeConfig = {
        searchPseudoElements: true,
      };

      const registerBtns = document.querySelectorAll('a[href="#register"]');
      const modal = document.querySelector('div[id="register"]');
      const closeBtn = document.querySelector(".close-icon");

      modal.addEventListener("click", (event) => {
        if (event.target.classList.contains("visible"))
          modal.classList.remove("visible");
      });

      closeBtn.addEventListener("click", (event) => {
        if (modal.classList.contains("visible"))
          modal.classList.remove("visible");
      });

      const registerBtn = document.querySelector(
        `a[href="https://dsc.community.dev/e/m5hfm4"]`
      );

      const submitBtn = document.querySelector(`a[href="#register"]`);

      registerBtn.addEventListener("click", (event) => {
        const progressBar = event.target.closest("ul");
        progressBar.classList.add("done");

        const indicator = event.target.closest("li");
        indicator.classList.add("complete");

        submitBtn.classList.remove("invisible");
      });

      submitBtn.addEventListener("click", (event) => {
        event.preventDefault();

        const progressBar = event.target.closest("ul");
        if (progressBar.classList.contains("done")) {
          const progressBar = event.target.closest("ul");
          progressBar.classList.add("final");

          const indicator = event.target.closest("li");
          indicator.classList.add("complete");
        } else {
          event.target.classList.add("error-btn");

          const errorMessage = document.querySelector("p.error");
          errorMessage.classList.remove("invisible");

          setTimeout(() => {
            event.target.classList.remove("error-btn");
            errorMessage.classList.add("invisible");
          }, 3000);
        }
      });

      registerBtns.forEach((btn) => {
        btn.addEventListener("click", (event) => {
          event.preventDefault();
          if (!event.target.classList.contains("error-btn"))
            modal.classList.add("visible");
        });
      });
    </script>
  </body>
</html>
